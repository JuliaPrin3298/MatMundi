<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatMundi</title>
    <link rel="icon" href="../images/logo.png" type="image/png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/ilha.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
    <script src="js/script.js"></script>


</head>

<body>
    <!--Navbar-->
    <nav class="navbar navbar-expand-lg navbar-light" style="background: linear-gradient(to right, #8ADEFF, #75EDE6);">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Alterna navegação">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav justify-content-end">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.php#home">Home</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../index.php#atividades">Atividades</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../index.php#jogos">Jogos</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../index.php#loca">Login / Cadastrar</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../perfil.html">Perfil</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-4 pt-4">
        <a href="javascript:void(0)" onclick="window.history.back()" class="">
            <i class="bi bi-arrow-left fs-6"></i>
        </a>
        <div id="alerta-container" style="margin-top: 15px;">
        </div>
        <div class="row mt-1">
            <div class="col-sm-12 col-md-12 mt-4">
                <div class="jogo">
                    <table class="tabuleiro">

                        <tr onclick="">
                            <td alt="1. "></td>
                            <td alt="2.a "></td>
                            <td alt="3.a "></td>
                            <td alt="4.a "></td>
                            <td alt="5.a "></td>
                            <td alt="6.a "></td>
                            <td alt="7.a "></td>
                        </tr>

                        <tr onclick="">
                            <td alt="1.b "></td>
                            <td alt="2.b "></td>
                            <td alt="3.b "></td>
                            <td alt="4.b "></td>
                            <td alt="5.b "></td>
                            <td alt="6.b "></td>
                            <td alt="7.b "></td>
                        </tr>

                        <tr onclick="">
                            <td alt="1.c "></td>
                            <td alt="2.c "></td>
                            <td alt="3.c "></td>
                            <td alt="4.c "></td>
                            <td alt="5.c "></td>
                            <td alt="6.c "></td>
                            <td alt="7.c "></td>
                        </tr>

                        <tr onclick="">
                            <td alt="1.d "></td>
                            <td alt="2.d "></td>
                            <td alt="3.d "></td>
                            <td alt="4.d "></td>
                            <td alt="5.d "></td>
                            <td alt="6.d "></td>
                            <td alt="7.d "></td>
                        </tr>

                        <tr onclick="">
                            <td alt="1.e "></td>
                            <td alt="2.e "></td>
                            <td alt="3.e "></td>
                            <td alt="4.e "></td>
                            <td alt="5.e "></td>
                            <td alt="6.e "></td>
                            <td alt="7.e "></td>
                        </tr>

                        <tr onclick="">
                            <td alt="1.f "></td>
                            <td alt="2.f "></td>
                            <td alt="3.f "></td>
                            <td alt="4.f "></td>
                            <td alt="5.f "></td>
                            <td alt="6.f "></td>
                            <td alt="7.f "></td>
                        </tr>
                    </table>



                    <button type="button" id="jogarNovamente" onclick="reiniciarJogo()" style="display: none;"
                        class="btn btn-warning">
                        Jogar Novamente
                    </button>

                    <div class="col" style="order: 2;">

                        <div class="row" id="info">

                            <div class="col-md-6 col-sm-6" style="height: 100px;">
                                <div class="contadores">
                                    <div class="cont d-flex align-items-center mt-2">
                                        <img class="icon" src="../images/IlhaDoTesouro/pa (1).png" style="width: 30px;"
                                            alt="">
                                        <h4 class="ms-2" id="pa">0</h4>
                                    </div>
                                    <div class="cont d-flex align-items-center mt-2">
                                        <img class="icon" src="../images/IlhaDoTesouro/erro.png" style="width: 30px;"
                                            alt="">
                                        <h4 class="ms-2" id="cavacoes">0</h4>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6 col-sm-6" style="height: 100px;">
                                <div class="contadores">
                                    <div class="cont d-flex align-items-center mt-2">
                                        <img class="icon" src="../images/IlhaDoTesouro/ampulheta.png"
                                            style="width: 30px;" alt="">
                                        <h4 class="ms-2" id="tempo"></h4>
                                    </div>
                                    <div class="cont d-flex align-items-center mt-2">
                                        <img class="icon" src="../images/IlhaDoTesouro/atencao.png" style="width: 30px;"
                                            alt="">
                                        <h4 class="ms-2" id="erros">0</h4>
                                    </div>
                                </div>
                            </div>

                            <!--CONTAS-->
                            <div class="col-12" id="abacate">
                                <!-- Questão -->
                                <div class="row d-flex align-items-center mt-4" id="conta">
                                    <div class="col-12 text-center">
                                        <div class="quest mb-4">
                                            <h2>10 + 5</h2>
                                        </div>
                                    </div>

                                    <!-- Alternativas -->
                                    <div class="col-md-6 col-sm-12">
                                        <div class="alternativas">
                                            <div class="altern d-flex justify-content-center align-items-center mt-2">
                                                <h4 class="ms-2">15</h4>
                                            </div>
                                            <div class="altern d-flex justify-content-center align-items-center mt-2">
                                                <h4 class="ms-2">5</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-12">
                                        <div class="alternativas">
                                            <div class="altern d-flex justify-content-center align-items-center mt-2">
                                                <h4 class="ms-2">53</h4>
                                            </div>
                                            <div class="altern d-flex justify-content-center align-items-center mt-2">
                                                <h4 class="ms-2">27</h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>



    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cells = document.querySelectorAll("table.tabuleiro td");
            const imagemTesouro = "../images/IlhaDoTesouro/tesouro.png";
            const imagemErro = "../images/IlhaDoTesouro/fechar.png";

            const indexTesouro = Math.floor(Math.random() * cells.length);
            console.log("💡 O tesouro está na célula:", indexTesouro);

            const colunas = 7;
            const linha = Math.floor(indexTesouro / colunas) + 1;
            const coluna = (indexTesouro % colunas) + 1;
            console.log(`📍 O tesouro está na linha ${linha}, coluna ${coluna}`);

            const erroSpan = document.getElementById("cavacoes");
            const timerSpan = document.getElementById("tempo");
            const paSpan = document.getElementById("pa");

            let erros = 0;
            let segundos = 0;
            let encontrouTesouro = false;

            function mostrarAlerta(mensagem, tipo = "info") {
                const alertaContainer = document.getElementById("alerta-container");
                alertaContainer.innerHTML = `
        <div class="alert alert-${tipo}" role="alert" style="font-size: 1.2em;">
            ${mensagem}
        </div> `;
            }


            const timer = setInterval(() => {
                segundos++;
                timerSpan.textContent = segundos;
            }, 1000);

            cells.forEach((cell, index) => {
                cell.addEventListener("click", function () {
                    if (cell.classList.contains("clicado") || encontrouTesouro) return;

                    let paAtual = parseInt(paSpan.textContent);

                    if (paAtual <= 0) {
                        mostrarAlerta("❌ Você não tem mais pás! Resolva contas para ganhar mais.", "warning");
                        return;
                    }

                    cell.classList.add("clicado");
                    paAtual--;
                    paSpan.textContent = paAtual;

                    const img = document.createElement("img");
                    img.style.maxWidth = "80%";
                    img.style.maxHeight = "80%";
                    img.style.objectFit = "contain";

                    if (index === indexTesouro) {
                        img.src = imagemTesouro;
                        cell.appendChild(img);
                        encontrouTesouro = true;
                        clearInterval(timer);

                        document.getElementById("jogarNovamente").style.display = "inline-block";

                        setTimeout(() => {
                            mostrarAlerta(`🎉 Parabéns! Você encontrou o tesouro em ${segundos} segundos com ${erros} erros.`, "success");
                        }, 100);
                    } else {
                        img.src = imagemErro;
                        cell.appendChild(img);
                        erros++;
                        erroSpan.textContent = erros;
                    }
                });
            });

            document.getElementById("jogarNovamente").addEventListener("click", () => {
                location.reload();
            });

            // 📘 CONTAS MÉDIAS +, -, *, /
            const contaH2 = document.querySelector('#conta h2');
            const alternativas = document.querySelectorAll('#conta .altern');
            const paEl = document.getElementById('pa');
            const errosEl = document.getElementById('erros');

            function novaConta() {
                if (encontrouTesouro) return;

                const operacoes = ['+', '-', '*', '/'];
                const oper = operacoes[Math.floor(Math.random() * operacoes.length)];

                let num1, num2, respostaCerta;

                if (oper === '+') {
                    num1 = Math.floor(Math.random() * 41) + 10; // 10 a 50
                    num2 = Math.floor(Math.random() * 41) + 10;
                    respostaCerta = num1 + num2;
                } else if (oper === '-') {
                    num1 = Math.floor(Math.random() * 41) + 10;
                    num2 = Math.floor(Math.random() * (num1 - 9)) + 10; // garante que num2 <= num1 e >=10
                    respostaCerta = num1 - num2;
                } else if (oper === '*') {
                    num1 = Math.floor(Math.random() * 12) + 1;
                    num2 = Math.floor(Math.random() * 12) + 1;
                    respostaCerta = num1 * num2;
                } else { // divisão
                    num2 = Math.floor(Math.random() * 12) + 1;
                    let resultado = Math.floor(Math.random() * 12) + 1;
                    num1 = num2 * resultado;
                    respostaCerta = resultado;
                }

                contaH2.textContent = `${num1} ${oper} ${num2}`;
                contaH2.setAttribute('data-certa', respostaCerta);

                const respostas = new Set([respostaCerta]);

                let tentativas = 0;
                while (respostas.size < 4 && tentativas < 100) {
                    let variacao;
                    let alternativa;

                    if (oper === '+' || oper === '-') {
                        variacao = Math.floor(Math.random() * 9) - 4;
                        alternativa = respostaCerta + variacao;
                    } else if (oper === '*') {
                        variacao = Math.floor(Math.random() * 21) - 10;
                        alternativa = respostaCerta + variacao;
                        if (alternativa < 0) alternativa = respostaCerta + Math.floor(Math.random() * 10);
                    } else { // divisão
                        variacao = Math.floor(Math.random() * 7) - 3;
                        alternativa = respostaCerta + variacao;
                        if (alternativa < 1) alternativa = respostaCerta + Math.floor(Math.random() * 3) + 1;
                    }

                    if (!respostas.has(alternativa) && Number.isInteger(alternativa)) {
                        respostas.add(alternativa);
                    }
                    tentativas++;
                }

                const respostasArray = [...respostas].sort(() => Math.random() - 0.5);

                alternativas.forEach((alt, index) => {
                    alt.querySelector('h4').textContent = respostasArray[index];
                    alt.setAttribute('data-resposta', respostasArray[index]);
                });
            }

            alternativas.forEach(alt => {
                alt.style.cursor = "pointer";
                alt.addEventListener('click', () => {
                    if (encontrouTesouro) return;

                    const valor = parseInt(alt.querySelector('h4').textContent);
                    const certa = parseInt(contaH2.getAttribute('data-certa'));

                    let paAtual = parseInt(paEl.textContent);
                    let errosAtual = parseInt(errosEl.textContent);

                    if (valor === certa) {
                        paAtual++;
                        paEl.textContent = paAtual;
                        mostrarAlerta('✅ Acertou! +1 pá', "success" );
                    } else {
                        errosAtual++;
                        errosEl.textContent = errosAtual;
                        mostrarAlerta('❌ Errou! +1 erro', "danger");
                    }

                    novaConta();
                });
            });

            novaConta();
        });

    </script>



    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>

         <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            $('.navbar-nav>li>a').on('click', function () {
                $('.navbar-collapse').collapse('hide');
            });
        });
    </script>
</body>

<footer style="margin-top: 60px;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" style="width: 100%; height: auto; display: block;">
        <path fill="#8ADEFF" fill-opacity="1"
            d="M0,224L40,234.7C80,245,160,267,240,266.7C320,267,400,245,480,197.3C560,149,640,75,720,85.3C800,96,880,192,960,218.7C1040,245,1120,203,1200,186.7C1280,171,1360,181,1400,186.7L1440,192L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z">
        </path>
    </svg>

    <div class="rodape text-center py-3">
        <div class="row align-items-center">
            <div class="col-12 col-md-4 mb-3 mb-md-0">
                <img src="../images/logo.png" class="img-fluid logo" alt="Logo" style="max-height: 80px;">
            </div>
            <div class="col-12 col-md-8">
                <p class="mb-0" style="font-family: 'Coming Soon', cursive; font-size: 15px;">© 2025 Copyright</p>
            </div>
        </div>
    </div>
</footer>

</html>