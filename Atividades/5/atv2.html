<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatMundi</title>
    <link rel="icon" href="../../images/logo.png" type="image/png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/atvs 5.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rammetto+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sigmar+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi+Fun:wght@400..700&display=swap" rel="stylesheet">
    <script src="js/script.js"></script>


    <style>
        .exercicio {
            display: none;
        }

        .exercicio.ativo {
            display: block;
        }
    </style>

</head>

<body>
    <!--Navbar-->
     <nav class="navbar navbar-expand-lg navbar-light" style="background: linear-gradient(to right, #8ADEFF, #75EDE6);">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Alterna navegaÃ§Ã£o">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav justify-content-end">
                <li class="nav-item active">
                    <a class="nav-link" href="../../index.html#home">Home</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../index.html#atividades">Atividades</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../index.html#jogos">Jogos</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../index.html#loca">Login / Cadastrar</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../perfil.html">Perfil</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-4 pt-4">
        <a href="javascript:void(0)" onclick="window.history.back()" class="">
            <i class="bi bi-arrow-left fs-6"></i>
        </a>
         <div id="rotate-warning" style="display: none;">
            <p>ðŸ”„ Vire seu celular para o modo paisagem para jogar melhor!</p>
        </div>
        <div class="row mt-1">
            <div class="col-sm-12 col-md-12 mt-4">
                <div class="game">
                    <div class="exercicio ativo" data-resposta="1350">
                        <!-- Aqui vai o conteÃºdo do ExercÃ­cio 1 -->
                        <h3 class="text-center">Atividade de FixaÃ§Ã£o</h3>
                        <p class="text-center" style="font-size: 18px;">
                            Ellie e Trixie fizeram 3 pizzas. Em cada pizza, usaram 200g de queijo, 150g de calabresa e
                            100g de molho.
                            Quantos gramas de ingredientes elas usaram para fazer todas as 3 pizzas?
                        </p>


                        <div class="row justify-content-between text-center mb-3">
                            <div class="col-sm-3 col-md-3">
                                <img src="../../images/Atv 5/queijo.png" alt="Queijo"
                                    style="max-width: 100px; cursor:pointer;" class="clicavel" data-maxclicks="3"
                                    data-valor="200">
                                <p style="font-family: 'Sigmar One'; font-size: 20px;">200g</p>
                            </div>

                            <div class="col-sm-3 col-md-3">
                                <img src="../../images/Atv 5/calabresa.png" alt="Calabresa"
                                    style="max-width: 100px; cursor:pointer;" class="clicavel" data-maxclicks="3"
                                    data-valor="150">
                                <p style="font-family: 'Sigmar One'; font-size: 20px;">150g</p>
                            </div>

                            <div class="col-sm-3 col-md-3">
                                <img src="../../images/Atv 5/molho-de-tomate.png" alt="Molho"
                                    style="max-width: 100px; cursor:pointer;" class="clicavel" data-maxclicks="3"
                                    data-valor="100">
                                <p style="font-family: 'Sigmar One'; font-size: 20px;">100g</p>
                            </div>
                        </div>

                        <!-- Aqui vai aparecer a conta vertical -->
                        <div id="conta-vertical"
                            style="font-family: 'Sigmar One'; font-size: 24px; text-align: center; white-space: pre-line; margin-top: 20px; user-select:none;">
                        </div>

                        <div style="text-align: center; margin-top: 20px;">
                            <button id="verificar-btn" class="btn alternativa-btn-custom">Verificar</button>
                        </div>


                        <div style="margin-top: 30px; text-align: center; font-family: 'Sigmar One'; font-size: 18px;">
                            <input id="input-milhar" type="text" maxlength="1" size="1" placeholder="M"
                                style="font-size: 24px; text-align: center;">
                            <input id="input-centena" type="text" maxlength="1" size="1" placeholder="C"
                                style="font-size: 24px; text-align: center;">
                            <input id="input-dezena" type="text" maxlength="1" size="1" placeholder="D"
                                style="font-size: 24px; text-align: center; margin-left: 10px;">
                            <input id="input-unidade" type="text" maxlength="1" size="1" placeholder="U"
                                style="font-size: 24px; text-align: center; margin-left: 10px;">
                            <br><br>
                        </div>


                        <div class="row text-center" id="alternativas" style="display:none;">

                            <div class="row">
                                <p>Agora que vocÃª conseguiu ajudar, Rick, Trixie e Ellie. Podemos seguir para a prÃ³xima
                                    tarefa na pizzaria! </p>
                            </div>
                        </div>
                    </div>

                    <!-- Container para os alertas -->
                    <div id="alerta-container" style="margin-top: 15px;">
                    </div>

                    <div class="row" id="neck">
                        <div class="next">
                            <div style="text-align: center; margin-top: 20px;">
                                <span class="material-symbols-outlined" onclick="window.history.back()"
                                    style="cursor: pointer; margin-right: 15px;">
                                    arrow_back
                                </span>
                                <a href="../../atividades5.html" onclick="proximoExercicio()"
                                    style="cursor: pointer; text-decoration: none; color: inherit;">
                                    <span class="material-symbols-outlined">
                                        arrow_forward
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
    </div>
    </div>
    </div>

    <style>
        .clicado {
            opacity: 0.5;
            pointer-events: none;
        }

        .alternativa-btn[disabled] {
            pointer-events: none;
            opacity: 0.6;
        }
    </style>
    <script>
        const imgs = document.querySelectorAll(".clicavel");
        const contaDiv = document.getElementById("conta-vertical");
        const btnVerificar = document.getElementById("verificar-btn");
        const alertaContainer = document.getElementById("alerta-container");
        const alternativas = document.getElementById("alternativas");
        const botoesAlternativas = document.querySelectorAll(".alternativa-btn");

        let valoresSelecionados = [];
        let clickCounts = {}; // contagem de clique por valor
        let somaAtual = 0;

        imgs.forEach(img => {
            const valor = img.getAttribute("data-valor");
            clickCounts[valor] = 0; // inicializa

            img.addEventListener("click", () => {
                const maxClicks = parseInt(img.getAttribute("data-maxclicks")) || 1;

                if (clickCounts[valor] >= maxClicks) return; // bloqueia apÃ³s limite

                clickCounts[valor]++;
                valoresSelecionados.push(parseInt(valor));
                somaAtual = valoresSelecionados.reduce((a, b) => a + b, 0);

                if (clickCounts[valor] >= maxClicks) img.classList.add("clicado");

                mostrarConta();
                limparInputs();
                limparAlerta();
            });
        });

        function mostrarConta() {
            // Quebra somaAtual em milhar, centena, dezena e unidade
            const milhar = Math.floor(somaAtual / 1000);
            const centena = Math.floor((somaAtual % 1000) / 100);
            const dezena = Math.floor((somaAtual % 100) / 10);
            const unidade = somaAtual % 10;

            let texto = "";
            valoresSelecionados.forEach((v, i) => {
                texto += (i === 0 ? `${v}\n` : `+${v}\n`);
            });
            texto += "----\n";
            contaDiv.textContent = texto;
        }

        function limparInputs() {
            document.getElementById("input-milhar").value = "";
            document.getElementById("input-centena").value = "";
            document.getElementById("input-dezena").value = "";
            document.getElementById("input-unidade").value = "";
        }

        function mostrarAlerta(tipo, titulo, mensagem) {
            alertaContainer.innerHTML = `
    <div class="alert ${tipo} alert-dismissible fade show" role="alert" style="font-family: 'Sigmar One'; font-size: 20px;">
      <strong>${titulo}</strong> ${mensagem}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close" onclick="fecharAlerta()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  `;
        }

        function fecharAlerta() {
            alertaContainer.innerHTML = "";
        }

        function limparAlerta() {
            alertaContainer.innerHTML = "";
        }

        btnVerificar.addEventListener("click", () => {
            if (valoresSelecionados.length === 0) {
                mostrarAlerta("alert-warning", "Por favor", "Selecione pelo menos uma imagem para formar a conta.");
                return;
            }

            const milhar = Math.floor(somaAtual / 1000);
            const centena = Math.floor((somaAtual % 1000) / 100);
            const dezena = Math.floor((somaAtual % 100) / 10);
            const unidade = somaAtual % 10;

            const inputM = document.getElementById("input-milhar").value.trim();
            const inputC = document.getElementById("input-centena").value.trim();
            const inputD = document.getElementById("input-dezena").value.trim();
            const inputU = document.getElementById("input-unidade").value.trim();

            if (![inputM, inputC, inputD, inputU].every(v => /^\d$/.test(v))) {
                mostrarAlerta("alert-warning", "AtenÃ§Ã£o", "Preencha todos os campos com nÃºmeros de 0 a 9.");
                return;
            }

            const milharInput = parseInt(inputM);
            const centenaInput = parseInt(inputC);
            const dezenaInput = parseInt(inputD);
            const unidadeInput = parseInt(inputU);

            if (milharInput === milhar && centenaInput === centena && dezenaInput === dezena && unidadeInput === unidade) {
                mostrarAlerta("alert-success", "ParabÃ©ns!", "Resultado correto ðŸŽ‰");
                alternativas.style.display = "block";
                botoesAlternativas.forEach(btn => btn.classList.remove("desativado"));

                gerarAlternativas(somaAtual);
            } else {
                mostrarAlerta("alert-danger", "Ops!", "Resultado incorreto. Tente novamente.");
                alternativas.style.display = "none";
                botoesAlternativas.forEach(btn => btn.classList.add("desativado"));
            }
        });

        function gerarAlternativas(correta) {
            // Cria 3 valores errados prÃ³ximos para confundir
            const alternativasValores = new Set();
            alternativasValores.add(correta);

            while (alternativasValores.size < 4) {
                let falso = correta + (Math.floor(Math.random() * 20) - 10);
                if (falso < 0) falso = Math.abs(falso) + 5;
                alternativasValores.add(falso);
            }

            // Embaralha e define texto dos botÃµes
            const arr = Array.from(alternativasValores);
            arr.sort(() => Math.random() - 0.5);

            botoesAlternativas.forEach((btn, i) => {
                btn.textContent = arr[i];
                btn.dataset.valor = arr[i];
            });
        }

        function verificarResposta(botao) {
            if (botao.classList.contains("desativado")) return;

            limparAlerta();

            const valorEscolhido = parseInt(botao.dataset.valor);
            const respostaCorreta = somaAtual;

            if (valorEscolhido === respostaCorreta) {
                mostrarAlerta("alert-success", "ParabÃ©ns!", "Resposta correta! ðŸŽ‰");
            } else {
                mostrarAlerta("alert-danger", "Ops!", "Resposta incorreta. Tente novamente.");
            }
        }

        let indexExercicio = 0;
        const exercicios = document.querySelectorAll(".exercicio");

        function proximoExercicio() {
            if (indexExercicio < exercicios.length - 1) {
                exercicios[indexExercicio].classList.remove("ativo");
                indexExercicio++;
                exercicios[indexExercicio].classList.add("ativo");
                resetarExercicio();
            }
        }

        function voltarExercicio() {
            if (indexExercicio > 0) {
                exercicios[indexExercicio].classList.remove("ativo");
                indexExercicio--;
                exercicios[indexExercicio].classList.add("ativo");
                resetarExercicio();
            }
        }

        function resetarExercicio() {
            limparAlerta();
            valoresSelecionados = [];
            somaAtual = 0;
            contaDiv.textContent = "";
            limparInputs();
            alternativas.style.display = "none";
            botoesAlternativas.forEach(btn => btn.classList.add("desativado"));
            imgs.forEach(img => {
                img.classList.remove("clicado");
                const valor = img.getAttribute("data-valor");
                clickCounts[valor] = 0;
            });
        }

        // Inicialmente desativa as alternativas
        window.addEventListener("DOMContentLoaded", () => {
            botoesAlternativas.forEach(btn => btn.classList.add("desativado"));
        });

    </script>


       <script>
        function checkOrientation() {
            const warning = document.getElementById('rotate-warning');
            const isMobile = window.innerWidth <= 768; // vocÃª pode ajustar esse nÃºmero se quiser
            const isPortrait = window.innerHeight > window.innerWidth;

            if (isMobile && isPortrait) {
                warning.style.display = 'flex';
            } else {
                warning.style.display = 'none';
            }
        }

        window.addEventListener('load', checkOrientation);
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);

    </script>


    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
         <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            $('.navbar-nav>li>a').on('click', function () {
                $('.navbar-collapse').collapse('hide');
            });
        });
    </script>
</body>


<footer style="margin-top: 60px;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" style="width: 100%; height: auto; display: block;">
        <path fill="#8ADEFF" fill-opacity="1"
            d="M0,224L40,234.7C80,245,160,267,240,266.7C320,267,400,245,480,197.3C560,149,640,75,720,85.3C800,96,880,192,960,218.7C1040,245,1120,203,1200,186.7C1280,171,1360,181,1400,186.7L1440,192L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z">
        </path>
    </svg>

    <div class="rodape text-center py-3">
        <div class="row align-items-center">
            <div class="col-12 col-md-4 mb-3 mb-md-0">
                <img src="../../images/logo.png" class="img-fluid logo" alt="Logo" style="max-height: 80px;">
            </div>
            <div class="col-12 col-md-8">
                <p class="mb-0" style="font-family: 'Coming Soon', cursive; font-size: 15px;">Â© 2025 Copyright</p>
            </div>
        </div>
    </div>
</footer>

</html>